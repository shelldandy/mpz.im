---
import BaseLayout from './BaseLayout.astro';
import Header from '../components/Header';
import Footer from '../components/Footer';
import Hero from '../components/Hero';

interface Props {
  title: string;
  hero?: string;
  description?: string;
  ogImage?: string;
  cta?: {
    label: string;
    link: string;
  };
}

const { title, hero, description, ogImage, cta } = Astro.props;

// Use custom OG image if provided, otherwise use hero image
const finalOgImage = ogImage || hero;
---

<BaseLayout
  title={title}
  description={description}
  ogImage={finalOgImage}
>
  {hero && (
    <link slot="head" rel="preload" as="image" href={hero} fetchpriority="high" />
  )}
  <Header client:idle />

  {hero && <Hero imageUrl={hero} title={title} cta={cta} />}

  <main class="homepage-content">
    <div class="prose">
      <slot />
    </div>
  </main>

  <Footer />
</BaseLayout>

<style>
  .homepage-content {
    max-width: 800px;
    margin: 0 auto;
    padding: 2rem 1rem;
  }

  .prose {
    line-height: 1.7;
    color: var(--text-primary);
  }
</style>
